#!/bin/bash
# Pre-push hook to run tests and linting before allowing a push
# This ensures that code pushed to remote passes all quality checks

set -e

echo "ğŸ” Running pre-push checks..."
echo ""

# Get the repository root directory
REPO_ROOT=$(git rev-parse --show-toplevel)
cd "$REPO_ROOT"

# Run linting
echo "ğŸ“ Running checks..."
if ! make check; then
    echo ""
    echo "âŒ checks failed. Please fix the issues before pushing."
    echo "   You can run 'make check' to see the errors."
    exit 1
fi

echo "âœ… All tests passed"
echo ""
echo "âœ¨ All pre-push checks passed! Proceeding with push..."
echo ""

exit 0
